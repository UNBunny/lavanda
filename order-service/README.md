# Order Management Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏ –¥–ª—è ERP —Å–∏—Å—Ç–µ–º—ã —Ü–≤–µ—Ç–æ—á–Ω–æ–π –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π LAVANDA.

## –û–ø–∏—Å–∞–Ω–∏–µ

Order Management Service –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–∫–∞–∑–æ–≤ –≤ —Ñ–ª–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–º –±–∏–∑–Ω–µ—Å–µ. –°–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏ –∑–∞–∫–∞–∑–æ–≤, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–ª–æ—Ä–∏—Å—Ç–æ–≤ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –∑–∞–∫–∞–∑–∞–º.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìù **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- üìä **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤**: –ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–∫–∞–∑–∞ –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ –¥–æ—Å—Ç–∞–≤–∫–∏
- üå∏ **–§–ª–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞**: —É—á–µ—Ç —Ü–≤–µ—Ç–æ–≤ –ø–æ—à—Ç—É—á–Ω–æ, –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ –º–µ—Ç—Ä–∞–º
- üë®‚Äçüé® **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–ª–æ—Ä–∏—Å—Ç–æ–≤**: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –º–µ–∂–¥—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂, –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- üîç **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –≥–∏–±–∫–∏–π –ø–æ–∏—Å–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- üí∞ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞–º–∏**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ–ø–ª–∞—Ç—ã –∏ —Ä–∞—Å—á–µ—Ç–æ–≤

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
order-service/
‚îú‚îÄ‚îÄ src/main/java/com/omstu/lavanda/order/
‚îÇ   ‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Spring Boot –∏ OpenAPI
‚îÇ   ‚îú‚îÄ‚îÄ controller/      # REST –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ dto/            # Data Transfer Objects
‚îÇ   ‚îú‚îÄ‚îÄ exception/      # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ mapper/         # –ú–∞–ø–ø–µ—Ä—ã Entity <-> DTO
‚îÇ   ‚îú‚îÄ‚îÄ model/          # JPA —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ repository/     # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ service/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ src/main/resources/
    ‚îú‚îÄ‚îÄ db/changelog/   # –ú–∏–≥—Ä–∞—Ü–∏–∏ Liquibase
    ‚îî‚îÄ‚îÄ application.yml # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### Order (–ó–∞–∫–∞–∑)
- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ
- –î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
- –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π —Ñ–ª–æ—Ä–∏—Å—Ç
- –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### OrderItem (–ü–æ–∑–∏—Ü–∏—è –∑–∞–∫–∞–∑–∞)
- –¢–æ–≤–∞—Ä –∏ –µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Ü–µ–Ω—ã
- –°–∫–∏–¥–∫–∏ –∏ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- –°–≤—è–∑—å —Å –±—É–∫–µ—Ç–∞–º–∏ (–¥–ª—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–π)

### OrderStatus (–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞)
- `NEW` - –ù–æ–≤—ã–π –∑–∞–∫–∞–∑
- `CONFIRMED` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
- `IN_PROGRESS` - –í —Ä–∞–±–æ—Ç–µ
- `READY` - –ì–æ—Ç–æ–≤ –∫ –≤—ã–¥–∞—á–µ
- `OUT_FOR_DELIVERY` - –í –¥–æ—Å—Ç–∞–≤–∫–µ
- `DELIVERED` - –î–æ—Å—Ç–∞–≤–ª–µ–Ω
- `CANCELLED` - –û—Ç–º–µ–Ω–µ–Ω
- `RETURNED` - –í–æ–∑–≤—Ä–∞—â–µ–Ω

## API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `POST /api/orders` - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- `GET /api/orders/{id}` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –ø–æ ID
- `PUT /api/orders/{id}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- `DELETE /api/orders/{id}` - –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- `PUT /api/orders/{id}/status` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `PUT /api/orders/{id}/assign/{floristId}` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–ª–æ—Ä–∏—Å—Ç–∞
- `PUT /api/orders/{id}/cancel` - –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞

### –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- `GET /api/orders/search` - –ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–æ–≤
- `GET /api/orders/by-status/{status}` - –ó–∞–∫–∞–∑—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `GET /api/orders/by-customer` - –ó–∞–∫–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–∞
- `GET /api/orders/by-florist/{floristId}` - –ó–∞–∫–∞–∑—ã —Ñ–ª–æ—Ä–∏—Å—Ç–∞

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- `GET /api/orders/statistics` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `PUT /api/orders/{id}/recalculate` - –ü–µ—Ä–µ—Å—á–µ—Ç —Å—É–º–º—ã

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Java 21** - –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Spring Boot 3.x** - –§—Ä–µ–π–º–≤–æ—Ä–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Spring Data JPA** - –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Liquibase** - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- **Lombok** - –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞
- **OpenAPI/Swagger** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **Maven** - –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/lavanda_orders
    username: ${DB_USERNAME:lavanda_user}
    password: ${DB_PASSWORD:lavanda_password}
```

### –ü–æ—Ä—Ç –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
```yaml
server:
  port: 8081
  servlet:
    context-path: /order-service
```

## –ó–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
mvn clean install

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
mvn spring-boot:run
```

### Docker
```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t lavanda/order-service .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8081:8081 lavanda/order-service
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- Swagger UI: http://localhost:8081/order-service/swagger-ui.html
- OpenAPI JSON: http://localhost:8081/order-service/v3/api-docs

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

Actuator endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å—É:
- Health: http://localhost:8081/order-service/actuator/health
- Metrics: http://localhost:8081/order-service/actuator/metrics
- Info: http://localhost:8081/order-service/actuator/info

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

Order Management Service –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ LAVANDA ERP:
- **Inventory Service** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–æ–≤
- **Finance Service** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- **Notification Service** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- **Employee Service** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–ª–æ—Ä–∏—Å—Ç–∞–º–∏

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ç–∫—É –æ—Ç `main`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã
4. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
–ù–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `src/main/resources/db/changelog/` –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ `db.changelog-master.xml`.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.
