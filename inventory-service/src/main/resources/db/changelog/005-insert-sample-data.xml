<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="005-insert-sample-flowers" author="lavanda-system">
        <comment>Вставка тестовых данных цветов</comment>

        <insert tableName="flowers">
            <column name="name" value="Роза красная"/>
            <column name="type" value="ROSE"/>
            <column name="color" value="RED"/>
            <column name="description" value="Классическая красная роза высшего качества"/>
            <column name="price_per_piece" value="150.00"/>
            <column name="stock_quantity" value="50"/>
            <column name="reserved_quantity" value="5"/>
            <column name="supplier" value="Цветочная база Москва"/>
            <column name="supplier_contact" value="+7-495-123-45-67"/>
            <column name="expiry_date" value="2024-12-31"/>
            <column name="seasonal_availability" value="ALL_YEAR"/>
            <column name="storage_conditions" value="Холодильник +2°C, влажность 85%"/>
            <column name="notes" value="Популярный товар, быстро раскупается"/>
            <column name="is_active" value="true"/>
        </insert>

        <insert tableName="flowers">
            <column name="name" value="Роза белая"/>
            <column name="type" value="ROSE"/>
            <column name="color" value="WHITE"/>
            <column name="description" value="Элегантная белая роза для свадебных букетов"/>
            <column name="price_per_piece" value="160.00"/>
            <column name="stock_quantity" value="30"/>
            <column name="reserved_quantity" value="10"/>
            <column name="supplier" value="Цветочная база Москва"/>
            <column name="supplier_contact" value="+7-495-123-45-67"/>
            <column name="expiry_date" value="2024-12-31"/>
            <column name="seasonal_availability" value="ALL_YEAR"/>
            <column name="storage_conditions" value="Холодильник +2°C, влажность 85%"/>
            <column name="notes" value="Идеально для свадебных композиций"/>
            <column name="is_active" value="true"/>
        </insert>

        <insert tableName="flowers">
            <column name="name" value="Тюльпан розовый"/>
            <column name="type" value="TULIP"/>
            <column name="color" value="PINK"/>
            <column name="description" value="Нежные розовые тюльпаны из Голландии"/>
            <column name="price_per_piece" value="80.00"/>
            <column name="stock_quantity" value="100"/>
            <column name="reserved_quantity" value="15"/>
            <column name="supplier" value="Голландские цветы"/>
            <column name="supplier_contact" value="+7-812-987-65-43"/>
            <column name="expiry_date" value="2024-12-15"/>
            <column name="seasonal_availability" value="SPRING"/>
            <column name="storage_conditions" value="Прохладное место +5°C"/>
            <column name="notes" value="Сезонный товар, весенняя коллекция"/>
            <column name="is_active" value="true"/>
        </insert>

        <insert tableName="flowers">
            <column name="name" value="Лилия белая"/>
            <column name="type" value="LILY"/>
            <column name="color" value="WHITE"/>
            <column name="description" value="Ароматные белые лилии премиум класса"/>
            <column name="price_per_piece" value="200.00"/>
            <column name="stock_quantity" value="25"/>
            <column name="reserved_quantity" value="3"/>
            <column name="supplier" value="Элитные цветы"/>
            <column name="supplier_contact" value="+7-495-555-77-88"/>
            <column name="expiry_date" value="2024-12-20"/>
            <column name="seasonal_availability" value="SUMMER"/>
            <column name="storage_conditions" value="Холодильник +3°C, хорошая вентиляция"/>
            <column name="notes" value="Премиум сегмент, сильный аромат"/>
            <column name="is_active" value="true"/>
        </insert>

        <insert tableName="flowers">
            <column name="name" value="Хризантема желтая"/>
            <column name="type" value="CHRYSANTHEMUM"/>
            <column name="color" value="YELLOW"/>
            <column name="description" value="Яркие желтые хризантемы"/>
            <column name="price_per_piece" value="90.00"/>
            <column name="stock_quantity" value="40"/>
            <column name="reserved_quantity" value="0"/>
            <column name="supplier" value="Осенние цветы"/>
            <column name="supplier_contact" value="+7-495-333-22-11"/>
            <column name="expiry_date" value="2024-11-30"/>
            <column name="seasonal_availability" value="AUTUMN"/>
            <column name="storage_conditions" value="Прохладное место +4°C"/>
            <column name="notes" value="Осенний ассортимент"/>
            <column name="is_active" value="true"/>
        </insert>

        <insert tableName="flowers">
            <column name="name" value="Эвкалипт"/>
            <column name="type" value="GREENERY"/>
            <column name="color" value="GREEN"/>
            <column name="description" value="Свежая зелень эвкалипта для композиций"/>
            <column name="price_per_piece" value="120.00"/>
            <column name="stock_quantity" value="60"/>
            <column name="reserved_quantity" value="8"/>
            <column name="supplier" value="Зеленый мир"/>
            <column name="supplier_contact" value="+7-495-444-55-66"/>
            <column name="expiry_date" value="2024-12-10"/>
            <column name="seasonal_availability" value="ALL_YEAR"/>
            <column name="storage_conditions" value="Прохладное место +6°C, высокая влажность"/>
            <column name="notes" value="Популярная зелень для букетов"/>
            <column name="is_active" value="true"/>
        </insert>

    </changeSet>

    <changeSet id="005-insert-sample-materials" author="lavanda-system">
        <comment>Вставка тестовых данных материалов</comment>

        <insert tableName="materials">
            <column name="name" value="Лента атласная красная"/>
            <column name="type" value="RIBBON"/>
            <column name="description" value="Атласная лента красного цвета для оформления букетов"/>
            <column name="price_per_meter" value="25.00"/>
            <column name="stock_meters" value="100.00"/>
            <column name="reserved_meters" value="5.50"/>
            <column name="supplier" value="Декор Плюс"/>
            <column name="supplier_contact" value="+7-495-777-88-99"/>
            <column name="color" value="Красный"/>
            <column name="width" value="2.5 см"/>
            <column name="material" value="Атлас"/>
            <column name="notes" value="Высокое качество, не линяет"/>
            <column name="is_active" value="true"/>
        </insert>

        <insert tableName="materials">
            <column name="name" value="Лента атласная белая"/>
            <column name="type" value="RIBBON"/>
            <column name="description" value="Белая атласная лента для свадебных букетов"/>
            <column name="price_per_meter" value="25.00"/>
            <column name="stock_meters" value="80.00"/>
            <column name="reserved_meters" value="12.00"/>
            <column name="supplier" value="Декор Плюс"/>
            <column name="supplier_contact" value="+7-495-777-88-99"/>
            <column name="color" value="Белый"/>
            <column name="width" value="2.5 см"/>
            <column name="material" value="Атлас"/>
            <column name="notes" value="Идеально для свадебных композиций"/>
            <column name="is_active" value="true"/>
        </insert>

        <insert tableName="materials">
            <column name="name" value="Бумага упаковочная крафт"/>
            <column name="type" value="WRAPPING_PAPER"/>
            <column name="description" value="Натуральная крафт-бумага для упаковки букетов"/>
            <column name="price_per_meter" value="15.00"/>
            <column name="stock_meters" value="200.00"/>
            <column name="reserved_meters" value="25.00"/>
            <column name="supplier" value="Упаковка Мастер"/>
            <column name="supplier_contact" value="+7-495-666-77-88"/>
            <column name="color" value="Натуральный"/>
            <column name="width" value="70 см"/>
            <column name="material" value="Крафт-бумага"/>
            <column name="notes" value="Экологичный материал"/>
            <column name="is_active" value="true"/>
        </insert>

        <insert tableName="materials">
            <column name="name" value="Проволока флористическая"/>
            <column name="type" value="WIRE"/>
            <column name="description" value="Гибкая проволока для создания каркасов"/>
            <column name="price_per_meter" value="8.00"/>
            <column name="stock_meters" value="500.00"/>
            <column name="reserved_meters" value="50.00"/>
            <column name="supplier" value="Флористические материалы"/>
            <column name="supplier_contact" value="+7-495-111-22-33"/>
            <column name="color" value="Зеленый"/>
            <column name="width" value="1.2 мм"/>
            <column name="material" value="Сталь с покрытием"/>
            <column name="notes" value="Не ржавеет, легко гнется"/>
            <column name="is_active" value="true"/>
        </insert>

        <insert tableName="materials">
            <column name="name" value="Пленка прозрачная"/>
            <column name="type" value="FILM"/>
            <column name="description" value="Прозрачная пленка для защиты букетов"/>
            <column name="price_per_meter" value="12.00"/>
            <column name="stock_meters" value="150.00"/>
            <column name="reserved_meters" value="10.00"/>
            <column name="supplier" value="Упаковка Мастер"/>
            <column name="supplier_contact" value="+7-495-666-77-88"/>
            <column name="color" value="Прозрачный"/>
            <column name="width" value="60 см"/>
            <column name="material" value="Полиэтилен"/>
            <column name="notes" value="Защищает от влаги и ветра"/>
            <column name="is_active" value="true"/>
        </insert>

    </changeSet>

    <changeSet id="005-insert-sample-freshness-calendar" author="lavanda-system">
        <comment>Вставка тестовых данных календаря свежести</comment>

        <insert tableName="freshness_calendar">
            <column name="flower_id" value="1"/>
            <column name="batch_number" value="ROSE-RED-001"/>
            <column name="quantity" value="25"/>
            <column name="delivery_date" value="2024-09-15"/>
            <column name="expiry_date" value="2024-09-22"/>
            <column name="freshness_status" value="FRESH"/>
            <column name="storage_conditions" value="Холодильник +2°C, влажность 85%"/>
            <column name="temperature_celsius" value="2"/>
            <column name="humidity_percentage" value="85"/>
            <column name="discount_percentage" value="0"/>
            <column name="is_sold" value="false"/>
            <column name="notes" value="Свежая партия красных роз"/>
        </insert>

        <insert tableName="freshness_calendar">
            <column name="flower_id" value="1"/>
            <column name="batch_number" value="ROSE-RED-002"/>
            <column name="quantity" value="25"/>
            <column name="delivery_date" value="2024-09-10"/>
            <column name="expiry_date" value="2024-09-17"/>
            <column name="freshness_status" value="GOOD"/>
            <column name="storage_conditions" value="Холодильник +2°C, влажность 85%"/>
            <column name="temperature_celsius" value="2"/>
            <column name="humidity_percentage" value="85"/>
            <column name="discount_percentage" value="10"/>
            <column name="is_sold" value="false"/>
            <column name="notes" value="Партия требует скидки"/>
        </insert>

        <insert tableName="freshness_calendar">
            <column name="flower_id" value="2"/>
            <column name="batch_number" value="ROSE-WHITE-001"/>
            <column name="quantity" value="30"/>
            <column name="delivery_date" value="2024-09-14"/>
            <column name="expiry_date" value="2024-09-21"/>
            <column name="freshness_status" value="FRESH"/>
            <column name="storage_conditions" value="Холодильник +2°C, влажность 85%"/>
            <column name="temperature_celsius" value="2"/>
            <column name="humidity_percentage" value="85"/>
            <column name="discount_percentage" value="0"/>
            <column name="is_sold" value="false"/>
            <column name="notes" value="Белые розы для свадебного заказа"/>
        </insert>

        <insert tableName="freshness_calendar">
            <column name="flower_id" value="3"/>
            <column name="batch_number" value="TULIP-PINK-001"/>
            <column name="quantity" value="50"/>
            <column name="delivery_date" value="2024-09-12"/>
            <column name="expiry_date" value="2024-09-19"/>
            <column name="freshness_status" value="GOOD"/>
            <column name="storage_conditions" value="Прохладное место +5°C"/>
            <column name="temperature_celsius" value="5"/>
            <column name="humidity_percentage" value="70"/>
            <column name="discount_percentage" value="5"/>
            <column name="is_sold" value="false"/>
            <column name="notes" value="Тюльпаны из весенней коллекции"/>
        </insert>

        <insert tableName="freshness_calendar">
            <column name="flower_id" value="3"/>
            <column name="batch_number" value="TULIP-PINK-002"/>
            <column name="quantity" value="50"/>
            <column name="delivery_date" value="2024-09-16"/>
            <column name="expiry_date" value="2024-09-23"/>
            <column name="freshness_status" value="FRESH"/>
            <column name="storage_conditions" value="Прохладное место +5°C"/>
            <column name="temperature_celsius" value="5"/>
            <column name="humidity_percentage" value="70"/>
            <column name="discount_percentage" value="0"/>
            <column name="is_sold" value="false"/>
            <column name="notes" value="Новая партия розовых тюльпанов"/>
        </insert>

        <insert tableName="freshness_calendar">
            <column name="flower_id" value="4"/>
            <column name="batch_number" value="LILY-WHITE-001"/>
            <column name="quantity" value="15"/>
            <column name="delivery_date" value="2024-09-13"/>
            <column name="expiry_date" value="2024-09-20"/>
            <column name="freshness_status" value="FRESH"/>
            <column name="storage_conditions" value="Холодильник +3°C, хорошая вентиляция"/>
            <column name="temperature_celsius" value="3"/>
            <column name="humidity_percentage" value="80"/>
            <column name="discount_percentage" value="0"/>
            <column name="is_sold" value="false"/>
            <column name="notes" value="Премиум лилии с сильным ароматом"/>
        </insert>

        <insert tableName="freshness_calendar">
            <column name="flower_id" value="6"/>
            <column name="batch_number" value="EUCALYPTUS-001"/>
            <column name="quantity" value="30"/>
            <column name="delivery_date" value="2024-09-11"/>
            <column name="expiry_date" value="2024-09-18"/>
            <column name="freshness_status" value="GOOD"/>
            <column name="storage_conditions" value="Прохладное место +6°C, высокая влажность"/>
            <column name="temperature_celsius" value="6"/>
            <column name="humidity_percentage" value="90"/>
            <column name="discount_percentage" value="15"/>
            <column name="is_sold" value="false"/>
            <column name="notes" value="Зелень эвкалипта, требует быстрой реализации"/>
        </insert>

        <insert tableName="freshness_calendar">
            <column name="flower_id" value="6"/>
            <column name="batch_number" value="EUCALYPTUS-002"/>
            <column name="quantity" value="30"/>
            <column name="delivery_date" value="2024-09-16"/>
            <column name="expiry_date" value="2024-09-23"/>
            <column name="freshness_status" value="FRESH"/>
            <column name="storage_conditions" value="Прохладное место +6°C, высокая влажность"/>
            <column name="temperature_celsius" value="6"/>
            <column name="humidity_percentage" value="90"/>
            <column name="discount_percentage" value="0"/>
            <column name="is_sold" value="false"/>
            <column name="notes" value="Свежая партия эвкалипта"/>
        </insert>

    </changeSet>

    <changeSet id="005-update-sequences" author="lavanda-system">
        <comment>Синхронизация последовательностей с максимальными ID</comment>
        
        <sql>
            -- Синхронизация последовательности для flowers
            SELECT setval('flowers_id_seq', COALESCE((SELECT MAX(id) FROM flowers), 1));
            
            -- Синхронизация последовательности для materials  
            SELECT setval('materials_id_seq', COALESCE((SELECT MAX(id) FROM materials), 1));
            
            -- Синхронизация последовательности для freshness_calendar
            SELECT setval('freshness_calendar_id_seq', COALESCE((SELECT MAX(id) FROM freshness_calendar), 1));
        </sql>
    </changeSet>

</databaseChangeLog>
